(function(s){typeof define=="function"&&define.amd?define(s):s()})(function(){"use strict";(()=>{console.log("this works");const c="https://4eda0ad3dfa7e2f1985a6b8aa8bd0157.environment.api.powerplatform.com:443/powerautomate/automations/direct/workflows/8cb0aa76244d406c80b33ded2fbd964d/triggers/manual/paths/invoke/?api-version=1&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=6RQ1defVrr-_AWlUFYkRo2q0-S2u_uj2eAhajl6xHlQ",i={zeelaan100:"Zeelaan 100 Algemeen",watrange:"Watrange",lespierres:"Les Pierres",jabito:"Jabito Algemeen",minerals:"Minerals"};function o(e,n){const t=e.querySelector(`[name="${n}"]`);return t?t.value:""}function r(e,n){const t=e.querySelector(`[name="${n}"]`);return t?t.checked:!1}function u(){const e=window.location.hostname.toLowerCase();for(const[n,t]of Object.entries(i))if(e.includes(n))return console.log("\u{1F310} Current URL:",e),console.log("\u{1F50D} Matched keyword:",n),console.log("\u{1F4CB} Mapped project:",t),t;return console.log("\u{1F310} Current URL:",e),console.log("\u26A0\uFE0F No project match found, using hostname"),e}function d(e){const t={Project:u(),LeadSource:o(e,"LeadSource"),FirstName:o(e,"name"),LastName:o(e,"surname"),StreetHouseNumber:o(e,"StreetHouseNumber"),PostalCode:o(e,"PostalCode"),Gender:o(e,"Gender"),Language:o(e,"Language"),Email:o(e,"email"),PhoneNumber:o(e,"phone"),MobilePhoneNumber:o(e,"MobilePhoneNumber"),Remarks:o(e,"note"),JobTitle:o(e,"JobTitle"),Donotbulkemail:r(e,"Donotbulkemail"),NewsLetter:r(e,"NewsLetter"),CreateContactIfNotExists:r(e,"CreateContactIfNotExists")};return console.log("\u{1F4E6} Lead data built:",t),t}async function m(e){e.preventDefault();const n=e.target;console.log("\u{1F680} Submitting lead from form:",n);const t=d(n);try{const a=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(console.log("\u{1F517} Request sent to:",c),a.ok){const l=await a.text();if(l)try{const g=JSON.parse(l);console.log("\u2705 Lead submitted successfully:",g)}catch{console.log("\u2705 Lead submitted successfully (no JSON):",l)}else console.log("\u2705 Lead submitted successfully (empty response body)")}else console.error("\u274C Failed to submit lead",await a.text())}catch(a){console.error("\u274C Error submitting lead:",a)}}document.querySelectorAll('form[data-name="Contact Form"]').forEach(e=>{e.addEventListener("submit",m),console.log("\u2705 Submit handler bound to form:",e)})})()});
